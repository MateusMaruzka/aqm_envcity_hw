Version 4
SHEET 1 2180 820
WIRE 960 -64 736 -64
WIRE 1120 -64 960 -64
WIRE 1152 -64 1120 -64
WIRE 960 -16 960 -64
WIRE 1120 32 1120 -64
WIRE 960 160 960 64
WIRE 752 208 672 208
WIRE 880 208 752 208
WIRE 1120 208 1120 96
WIRE 1120 208 976 208
WIRE 1200 208 1120 208
WIRE 1280 208 1200 208
WIRE 1344 208 1280 208
WIRE -16 256 -16 176
WIRE 752 256 752 208
WIRE 272 272 240 272
WIRE 1280 272 1280 208
WIRE 752 304 752 256
WIRE 272 320 240 320
WIRE -16 384 -16 336
WIRE 752 432 752 384
WIRE 1280 432 1280 336
FLAG -16 384 0
FLAG -16 176 Vusb
FLAG 752 432 0
FLAG 1280 432 0
FLAG 736 -64 Vusb_swo
FLAG 240 320 0
FLAG 240 272 Vusb
FLAG 320 336 Vusb
FLAG 320 256 Vusb_swo
FLAG 1200 208 Vout2
FLAG 752 256 Vbat
DATAFLAG 688 208 ""
DATAFLAG 1152 -64 "$-V(N005)"
DATAFLAG -16 208 ""
DATAFLAG 1344 208 ""
SYMBOL voltage -16 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL pmos 880 160 M90
SYMATTR InstName M1
SYMATTR Value FDR840P
SYMBOL res 944 -32 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL schottky 1104 32 R0
SYMATTR InstName D1
SYMATTR Value 1N5817
SYMBOL Misc\\battery 752 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3
SYMBOL sw 320 352 M180
SYMATTR InstName S2
SYMBOL load 1264 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 500m
TEXT 1136 -88 Left 2 ;Vdiodo
TEXT 1544 -72 Left 2 ;.tran 0.1\n.model sw sw()\n.step param i2 100m 1 100m\n.meas Pin2 AVG V(Vusb)*-I(V1)\n.meas Pbat AVG -V(Vbat)*I(V3)\n.meas Pout2 AVG V(Vout2)*I(I1)\n.meas Eff2 param Pout2/Pbat
TEXT 1992 -72 Left 2 !.op\n.model SW sw()
